<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <title>Quiz Results - Quiz Wizz</title>
   <meta name="description" content="Your quiz results - Quiz Wizz">
   <meta name="author" content="Shubham Chouksey">

   <!-- Font Awesome -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

   <!-- Custom Result CSS -->
   <link rel="stylesheet" type="text/css" href="/css/result.css">

   <!-- Favicon -->
   <link rel="icon" href="/images/fevicon.png" type="image/gif" />
</head>

<body>
   <!-- Results Container -->
   <div class="results-container">
      <!-- Header -->
      <header class="results-header">
         <div class="logo">
            <a href="/"><i class="fas fa-graduation-cap"></i> Quiz Wizz</a>
         </div>
         <div class="header-actions">
            <a href="/" class="btn-secondary"><i class="fas fa-home"></i> Home</a>
            <a href="/quiz" class="btn-primary"><i class="fas fa-redo"></i> Retake Quiz</a>
         </div>
      </header>

      <!-- Main Results Section -->
      <main class="results-main">
         <!-- Score Card -->
         <div class="score-card">
            <div class="score-header">
               <i class="fas fa-trophy trophy-icon"></i>
               <h1>Quiz Completed!</h1>
               <p class="congratulations-text">Congratulations on finishing the quiz</p>
            </div>

            <div class="score-display">
               <div class="score-circle">
                  <svg viewBox="0 0 200 200">
                     <defs>
                        <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                           <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                           <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                        </linearGradient>
                     </defs>
                     <circle class="score-circle-bg" cx="100" cy="100" r="90"></circle>
                     <circle class="score-circle-progress" cx="100" cy="100" r="90"
                        th:attr="stroke-dashoffset=${565.5 - (565.5 * score / maxScore)}"></circle>
                  </svg>
                  <div class="score-text">
                     <span class="score-number" th:text="${score}">8</span>
                     <span class="score-divider">/</span>
                     <span class="score-max" th:text="${maxScore}">10</span>
                  </div>
               </div>

               <div class="performance-badge" th:classappend="${score >= maxScore * 0.8 ? 'excellent' : (score >= maxScore * 0.6 ? 'good' : 'needs-improvement')}">
                  <i class="fas" th:classappend="${score >= maxScore * 0.8 ? 'fa-star' : (score >= maxScore * 0.6 ? 'fa-thumbs-up' : 'fa-book')}"></i>
                  <span th:text="${score >= maxScore * 0.8 ? 'Excellent!' : (score >= maxScore * 0.6 ? 'Good Job!' : 'Keep Learning!')}">Excellent!</span>
               </div>
            </div>

            <div class="stats-grid">
               <div class="stat-item">
                  <i class="fas fa-check-circle stat-icon correct"></i>
                  <div class="stat-info">
                     <span class="stat-value" th:text="${score}">8</span>
                     <span class="stat-label">Correct</span>
                  </div>
               </div>

               <div class="stat-item">
                  <i class="fas fa-times-circle stat-icon incorrect"></i>
                  <div class="stat-info">
                     <span class="stat-value" th:text="${maxScore - score}">2</span>
                     <span class="stat-label">Incorrect</span>
                  </div>
               </div>

               <div class="stat-item">
                  <i class="fas fa-percentage stat-icon percentage"></i>
                  <div class="stat-info">
                     <span class="stat-value" th:text="${#numbers.formatDecimal(score * 100.0 / maxScore, 1, 1) + '%'}">80%</span>
                     <span class="stat-label">Accuracy</span>
                  </div>
               </div>
            </div>
         </div>

         <!-- Answer Review Section -->
         <div class="review-section">
            <div class="review-header">
               <h2><i class="fas fa-list-check"></i> Answer Review</h2>
               <p>Review your answers and learn from mistakes</p>
            </div>

            <div class="questions-review">
               <div class="question-review-card" th:each="question, iterStat : ${questions}">
                  <div class="question-review-header">
                     <span class="question-number">Question <span th:text="${iterStat.index + 1}">1</span></span>
                     <span class="answer-status"
                        th:classappend="${question.useOptedAnswer == -1 ? 'unattempted' : (question.ans == question.useOptedAnswer ? 'correct' : 'incorrect')}">
                        <i class="fas"
                           th:classappend="${question.useOptedAnswer == -1 ? 'fa-circle-minus' : (question.ans == question.useOptedAnswer ? 'fa-check-circle' : 'fa-times-circle')}"></i>
                        <span th:text="${question.useOptedAnswer == -1 ? 'Unattempted' : (question.ans == question.useOptedAnswer ? 'Correct' : 'Incorrect')}">Correct</span>
                     </span>
                  </div>

                  <div class="question-statement" th:text="${question.statement}">
                     What is the capital of France?
                  </div>

                  <div class="options-review">
                     <div class="option-review"
                        th:classappend="${question.ans == 0 ? 'correct-answer' : ''} + ' ' + ${question.useOptedAnswer == 0 && question.ans != 0 ? 'wrong-answer' : ''}">
                        <span class="option-letter">A</span>
                        <span class="option-text" th:text="${question.optionA}">Paris</span>
                        <span class="option-indicator">
                           <i th:if="${question.ans == 0}" class="fas fa-check correct-icon"></i>
                           <i th:if="${question.useOptedAnswer == 0 && question.ans != 0}" class="fas fa-times wrong-icon"></i>
                        </span>
                     </div>

                     <div class="option-review"
                        th:classappend="${question.ans == 1 ? 'correct-answer' : ''} + ' ' + ${question.useOptedAnswer == 1 && question.ans != 1 ? 'wrong-answer' : ''}">
                        <span class="option-letter">B</span>
                        <span class="option-text" th:text="${question.optionB}">London</span>
                        <span class="option-indicator">
                           <i th:if="${question.ans == 1}" class="fas fa-check correct-icon"></i>
                           <i th:if="${question.useOptedAnswer == 1 && question.ans != 1}" class="fas fa-times wrong-icon"></i>
                        </span>
                     </div>

                     <div class="option-review"
                        th:classappend="${question.ans == 2 ? 'correct-answer' : ''} + ' ' + ${question.useOptedAnswer == 2 && question.ans != 2 ? 'wrong-answer' : ''}">
                        <span class="option-letter">C</span>
                        <span class="option-text" th:text="${question.optionC}">Berlin</span>
                        <span class="option-indicator">
                           <i th:if="${question.ans == 2}" class="fas fa-check correct-icon"></i>
                           <i th:if="${question.useOptedAnswer == 2 && question.ans != 2}" class="fas fa-times wrong-icon"></i>
                        </span>
                     </div>

                     <div class="option-review"
                        th:classappend="${question.ans == 3 ? 'correct-answer' : ''} + ' ' + ${question.useOptedAnswer == 3 && question.ans != 3 ? 'wrong-answer' : ''}">
                        <span class="option-letter">D</span>
                        <span class="option-text" th:text="${question.optionD}">Rome</span>
                        <span class="option-indicator">
                           <i th:if="${question.ans == 3}" class="fas fa-check correct-icon"></i>
                           <i th:if="${question.useOptedAnswer == 3 && question.ans != 3}" class="fas fa-times wrong-icon"></i>
                        </span>
                     </div>
                  </div>
               </div>
            </div>
         </div>

         <!-- Action Buttons -->
         <div class="action-section">
            <a href="/quiz" class="btn-action btn-retake">
               <i class="fas fa-redo"></i> Take Another Quiz
            </a>
            <a href="/leaderboard" class="btn-action btn-leaderboard">
               <i class="fas fa-trophy"></i> View Leaderboard
            </a>
            <a href="/" class="btn-action btn-home">
               <i class="fas fa-home"></i> Back to Home
            </a>
         </div>
      </main>

      <!-- Footer -->
      <footer class="results-footer">
         <p>&copy; 2024 Quiz Wizz. Designed by <a href="https://shubhamchouksey123.github.io/portfolio/" target="_blank">Shubham Chouksey</a></p>
      </footer>
   </div>

</body>

</html>
