<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <title>Quiz Wizz - Take Quiz</title>
   <meta name="description" content="Test your knowledge with Quiz Wizz - Interactive quiz platform">
   <meta name="author" content="Shubham Chouksey">

   <!-- Font Awesome -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

   <!-- Custom Quiz CSS -->
   <link rel="stylesheet" type="text/css" href="/css/quiz.css">

   <!-- Favicon -->
   <link rel="icon" href="/images/fevicon.png" type="image/gif" />
</head>

<body>
   <!-- Quiz Container -->
   <div class="quiz-container">
      <!-- Header -->
      <header class="quiz-header">
         <div class="logo">
            <a href="/"><i class="fas fa-graduation-cap"></i> Quiz Wizz</a>
         </div>
         <div class="header-actions">
            <a href="/" class="btn-secondary"><i class="fas fa-home"></i> Home</a>
         </div>
      </header>

      <!-- Progress Bar -->
      <div class="progress-container">
         <div class="progress-info">
            <span class="current-question">Question <span id="currentQuestionNum">1</span></span>
            <span class="total-questions">of <span th:text="${totalQuestions}">10</span></span>
         </div>
         <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
         </div>
         <div class="progress-percentage">
            <span id="progressPercent">10%</span> Complete
         </div>
      </div>

      <!-- Main Quiz Section -->
      <main class="quiz-main">
         <!-- Question Card -->
         <div class="question-card">
            <div class="question-header">
               <span class="question-badge"><i class="fas fa-question-circle"></i> Multiple Choice</span>
               <span class="question-timer" id="timer">
                  <i class="fas fa-clock"></i> <span id="timeElapsed">00:00</span>
               </span>
            </div>

            <h2 class="question-text" id="questionDescription">Loading question...</h2>

            <!-- Options -->
            <div class="options-container" id="optionsContainer">
               <div class="option" data-option="0">
                  <input type="radio" name="answer" id="optionA" value="0">
                  <label for="optionA">
                     <span class="option-letter">A</span>
                     <span class="option-text" id="optionADescription">Option A</span>
                     <span class="option-check"><i class="fas fa-check"></i></span>
                  </label>
               </div>

               <div class="option" data-option="1">
                  <input type="radio" name="answer" id="optionB" value="1">
                  <label for="optionB">
                     <span class="option-letter">B</span>
                     <span class="option-text" id="optionBDescription">Option B</span>
                     <span class="option-check"><i class="fas fa-check"></i></span>
                  </label>
               </div>

               <div class="option" data-option="2">
                  <input type="radio" name="answer" id="optionC" value="2">
                  <label for="optionC">
                     <span class="option-letter">C</span>
                     <span class="option-text" id="optionCDescription">Option C</span>
                     <span class="option-check"><i class="fas fa-check"></i></span>
                  </label>
               </div>

               <div class="option" data-option="3">
                  <input type="radio" name="answer" id="optionD" value="3">
                  <label for="optionD">
                     <span class="option-letter">D</span>
                     <span class="option-text" id="optionDDescription">Option D</span>
                     <span class="option-check"><i class="fas fa-check"></i></span>
                  </label>
               </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="quiz-navigation">
               <button class="btn-nav btn-previous" id="previousBtn" disabled>
                  <i class="fas fa-arrow-left"></i> Previous
               </button>

               <div class="question-dots" id="questionDots">
                  <!-- Dots will be generated by JavaScript -->
               </div>

               <button class="btn-nav btn-next" id="nextBtn">
                  Next <i class="fas fa-arrow-right"></i>
               </button>
            </div>
         </div>

         <!-- Submit Section (Hidden initially) -->
         <div class="submit-section" id="submitSection" style="display: none;">
            <div class="submit-card">
               <div class="submit-icon">
                  <i class="fas fa-check-circle"></i>
               </div>
               <h2>Ready to Submit?</h2>
               <p class="submit-info">
                  You've answered <span id="answeredCount">0</span> out of <span th:text="${totalQuestions}">10</span> questions.
               </p>
               <p class="submit-warning" id="unansweredWarning" style="display: none;">
                  <i class="fas fa-exclamation-triangle"></i>
                  You have <span id="unansweredCount">0</span> unanswered question(s).
               </p>

               <form id="quizForm" method="post" action="/submit-quiz">
                  <div class="form-group">
                     <label for="userName"><i class="fas fa-user"></i> Your Name</label>
                     <input type="text" id="userName" name="name" placeholder="Enter your name" required>
                  </div>

                  <div class="form-group">
                     <label for="userEmail"><i class="fas fa-envelope"></i> Your Email</label>
                     <input type="email" id="userEmail" name="email" placeholder="Enter your email" required>
                  </div>

                  <input type="hidden" id="userOptedAnswers" name="userOptedAnswers" value="">
                  <input type="hidden" id="questionIds" name="questionIds" value="">

                  <div class="submit-actions">
                     <button type="button" class="btn-secondary" id="backToQuizBtn">
                        <i class="fas fa-arrow-left"></i> Back to Quiz
                     </button>
                     <button type="submit" class="btn-submit">
                        <i class="fas fa-paper-plane"></i> Submit Quiz
                     </button>
                  </div>
               </form>
            </div>
         </div>
      </main>

      <!-- Footer -->
      <footer class="quiz-footer">
         <p>&copy; 2024 Quiz Wizz. Designed by <a href="https://shubhamchouksey123.github.io/portfolio/" target="_blank">Shubham Chouksey</a></p>
      </footer>
   </div>

   <!-- Hidden Data -->
   <input type="hidden" id="questionNumberToShow" th:value="${questionNumberToShow}">
   <input type="hidden" id="totalQuestions" th:value="${totalQuestions}">
   <script th:inline="javascript">
      var questionsData = [[${questions}]];
   </script>

   <!-- Quiz JavaScript -->
   <script src="/js/quiz.js"></script>
</body>

</html>
